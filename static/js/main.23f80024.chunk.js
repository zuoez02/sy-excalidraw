(this.webpackJsonpexcalidraw_widget_v2=this.webpackJsonpexcalidraw_widget_v2||[]).push([[0],{33:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(9),a=window||e,c=function(){var e,t,n,c,o,u=Object(r.b)();return u===r.a.oceanPress?null===(e=a.frameElement)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.dataset.nId:u===r.a.siYuan?null===(n=a.frameElement)||void 0===n||null===(c=n.parentElement)||void 0===c||null===(o=c.parentElement)||void 0===o?void 0:o.dataset.nodeId:void r.a.unknown}}).call(this,n(16))},38:function(e,t,n){},83:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(12),o=n.n(c),u=(n(38),n(2)),i=n.n(u),s=n(5),l=n(7),d=n(33),p=n(14),f=n(6),b={appState:{viewBackgroundColor:"#fff9db",currentItemFontFamily:1},scrollToContent:!0},j=n(4),v=n.n(j),h=n(19),O=n(18),g=[function(e){return e},function(e){console.log(e)}],m=[function(e){return e},function(e){console.log(e)}],w={200102311:{err_code:"200102311",status:"error",err_msg:"this is a net err",callback:function(){}},3333333:{err_code:"333333",status:"error",err_msg:"\u6ca1\u6709\u547d\u4e2d\u9519\u8bef\u7801",callback:function(){}}};Object.freeze(w);var x,y,k=function(e){if(0===+e)return!1;var t=e in w?w[e]:w[3333333],n=t.err_code,r=t.status,a=t.err_msg;return(0,t.callback)(),{err_code:n,status:r,err_msg:a}},_=window.location.protocol+"//"+window.location.host;function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v()({method:"post",headers:Object(h.a)(Object(h.a)({},v.a.defaults.headers),n),url:e,data:t}).then((function(e){var t,n=k(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.code);return n?Promise.reject(n):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))}v.a.defaults.baseURL=_,v.a.defaults.headers["Content-Type"]="application/json",v.a.defaults.timeout=1e4,(x=v.a.interceptors.response).use.apply(x,Object(O.a)(g)),(y=v.a.interceptors.request).use.apply(y,Object(O.a)(m));var z=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"/assets/",(r=new FormData).append("assetsDirPath",n),r.append("file[]",t),e.prev=4,e.next=7,F("/api/asset/upload",r,{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundarywQfr1gRNyYgeIt9h"});case 7:return a=e.sent,e.abrupt("return",a.data);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.get(t,{}).then((function(e){return e?e.data:void 0})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("/api/attr/setBlockAttrs",{id:"".concat(t),attrs:n});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("/api/attr/getBlockAttrs",{id:"".concat(t)});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),E=(n(83),n(0)),N=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDay();return"".concat(t,"-").concat(n,"-").concat(r,"_").concat(Date.now())},B=function(){return Object(E.jsx)(E.Fragment,{})};function P(){Object(r.useEffect)((function(){console.log("author: zuoez02 & github:https://github.com/zuoez02 ")}),[]);var e=Object(r.useRef)(null),t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),u=Object(l.a)(o,2),j=u[0],v=u[1],h=Object(r.useState)(!1),O=Object(l.a)(h,2),g=O[0],m=O[1],w=Object(r.useState)("light"),x=Object(l.a)(w,2),y=x[0],k=x[1],_=Object(r.useState)("zh"===navigator.language?"zh-CN":navigator.language),F=Object(l.a)(_,2),P=F[0],T=F[1],A=Object(r.useMemo)((function(){return Object(d.a)()}),[]),M=Object(r.useState)(b),D=Object(l.a)(M,2),Y=D[0],q=D[1],R=Object(r.useState)(!1),J=Object(l.a)(R,2),L=J[0],U=J[1],V=Object(r.useState)(!1),G=Object(l.a)(V,2),Z=G[0],K=G[1];function Q(){return(Q=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementsByClassName("excalidraw-wrapper")[0]){e.next=3;break}return e.abrupt("return");case 3:Z?document.exitFullscreen&&document.exitFullscreen():t.requestFullscreen&&t.requestFullscreen(),K(!Z);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(s.a)(i.a.mark((function t(){var n,r,a,c,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(p.serializeAsJSON)(e.current.getSceneElements(),e.current.getAppState(),e.current.getFiles(),"local"),r=new Blob([n],{type:"application/json"}),a=A+".excalidraw",c=new File([r],a),t.prev=4,t.next=7,z(c);case 7:o=t.sent,u=o.succMap[a],I(A,{"custom-excalidraw":u,"data-assets":u}),e.current.setToast({message:"\u4fdd\u5b58\u6210\u529f"}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(4),e.current.setToast({message:"\u4fdd\u5b58\u5931\u8d25"}),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[4,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(A);case 2:t=e.sent,(n=t["custom-excalidraw"])?S(n).then((function(e){q(e),U(!0)})):U(!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[A]),Object(E.jsx)("div",{className:"App",children:Object(E.jsx)("div",{className:"excalidraw-wrapper",onBlur:function(){},children:L&&Object(E.jsx)(p.Excalidraw,{ref:e,initialData:Y,viewModeEnabled:a,zenModeEnabled:j,gridModeEnabled:g,theme:y,name:N(),UIOptions:{canvasActions:{loadScene:!0,theme:!0}},renderTopRightUI:function(){return function(e,t,n,r){var a=r.onLanguage,c=r.setTheme,o=r.setGrid,u=r.setView,i=(r.setZen,r.saveFile),s=r.toggleFullscreen;return Object(E.jsxs)("div",{className:"excalidraw_top-right_wrap",children:[Object(E.jsxs)("div",{children:[Object(E.jsx)("select",{defaultValue:navigator.language,className:"excalidraw_top-right_select",onChange:function(e){a(e.target.value)},children:p.languages.map((function(e){return Object(E.jsx)("option",{value:e.code,children:e.label},e.code)}))}),Object(E.jsx)("button",{className:"excalidraw_top-right_button",onClick:function(){return window.open("https://excalidraw.com/","_blank")},children:"excalidraw"})]}),Object(E.jsxs)("div",{className:"excalidraw_top-right_function",children:[Object(E.jsx)("div",{title:"\u89c6\u56fe\u6a21\u5f0f",onClick:function(){u()},children:n?Object(E.jsx)(f.Icon,{type:"eye",size:"18"}):Object(E.jsx)(f.Icon,{type:"eye-outline",size:"18"})}),Object(E.jsx)("div",{title:"\u4e3b\u9898",onClick:function(){c()},children:"light"===e?Object(E.jsx)(f.Icon,{type:"contrast-outline",size:"18"}):Object(E.jsx)(f.Icon,{type:"contrast",size:"18"})}),Object(E.jsx)("div",{title:"\u7f51\u683c\u6a21\u5f0f",onClick:function(){o()},children:t?Object(E.jsx)(f.Icon,{type:"grid",size:"18"}):Object(E.jsx)(f.Icon,{type:"grid-outline",size:"18"})}),Object(E.jsx)("div",{title:"\u4fdd\u5b58",onClick:function(){i()},children:Object(E.jsx)(f.Icon,{type:"file-tray-full-outline",size:"18",color:"#f00"})}),Object(E.jsx)("div",{title:"\u5207\u6362\u5168\u5c4f",onClick:function(){s()},children:Object(E.jsx)(f.Icon,{type:"expand-outline",size:"18"})})]})]})}(y,g,a,{onLanguage:function(e){return T(e)},setTheme:function(){k("light"===y?"dark":"light")},setGrid:function(){return m(!g)},setView:function(){return c(!a)},setZen:function(){return v(!j)},saveFile:function(){return function(){return W.apply(this,arguments)}()},toggleFullscreen:function(){return function(){return Q.apply(this,arguments)}()}})},renderFooter:B,langCode:P,autoFocus:!1,detectScroll:!0})})})}var T=function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(P,{})})};o.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(T,{})}),document.getElementById("root"))},9:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=window||e;function a(){return o("main[data-n-id]")?c.env.oceanPress:o(".protyle-content")&&o("[data-node-id]")?c.siYuan:c.unknown}var c={siYuan:"siYuan",oceanPress:"oceanPress",unknown:"unknown"};function o(e){var t;return null===(t=r.parent)||void 0===t?void 0:t.document.querySelector(e)}}).call(this,n(16))}},[[85,1,2]]]);
//# sourceMappingURL=main.23f80024.chunk.js.map